# SanityHarness Configuration
# See: https://github.com/lemon07r/sanityharness

[harness]
session_dir = "./sessions"
default_timeout = 120       # seconds per task
max_attempts = 5            # maximum attempts in watch mode
output_format = "all"       # json, human, or all

[docker]
go_image = "ghcr.io/lemon07r/sanity-go:latest"
rust_image = "ghcr.io/lemon07r/sanity-rust:latest"
typescript_image = "ghcr.io/lemon07r/sanity-ts:latest"
kotlin_image = "ghcr.io/lemon07r/sanity-kotlin:latest"
dart_image = "ghcr.io/lemon07r/sanity-dart:latest"
zig_image = "ghcr.io/lemon07r/sanity-zig:latest"
auto_pull = true            # automatically pull images if missing

# =============================================================================
# Sandbox Configuration
# =============================================================================
# The bubblewrap (bwrap) sandbox restricts agent filesystem access during eval.
# $HOME is mounted read-only, with specific directories made writable so agents
# can persist session data, auth tokens, and caches.
#
# shared_readwrite_dirs and shared_readonly_dirs are HOME-relative (or absolute)
# allowlists for broad compatibility and least-privilege access.
# writable_dirs remains an extra writable allowlist for custom paths.
[sandbox]
# shared_readwrite_dirs = [".config", ".cache", ".local/share", ".local/state"]
# shared_readonly_dirs = ["bin", ".local/bin", "go/bin"]
# writable_dirs = ["go", "my-tool-data"]
# readable_denylist = ["tasks", "eval-results", "sessions"]

# =============================================================================
# Agent Configuration
# =============================================================================
# Built-in agents with sensible defaults:
#   gemini, kilocode, opencode, claude, codex, kimi, crush, copilot,
#   droid, iflow, qwen, amp, codebuff, vibe, goose, junie, ccs, cline, pi
#
# You can override any built-in agent or add custom agents below.
# Each agent config supports:
#   command           - Binary name or path (required)
#   args              - Arguments with {prompt} placeholder (required)
#   model_flag        - Flag for specifying model (optional)
#   model_flag_position - "before" or "after" args (default: "before")
#   env               - Environment variables as key-value pairs (optional)
#
# Example: Override gemini to use a specific model by default
# [agents.gemini]
# command = "gemini"
# args = ["--yolo", "--model", "gemini-2.5-pro", "{prompt}"]
#
# Example: Add a custom agent
# [agents.my-agent]
# command = "/path/to/my-agent"
# args = ["--auto-approve", "--format", "json", "{prompt}"]
# model_flag = "-m"
# model_flag_position = "before"
# env = { MY_API_KEY = "xxx", DEBUG = "true" }
#
# Example: Agent with prompt in the middle of args
# [agents.special-agent]
# command = "special"
# args = ["run", "{prompt}", "--verbose", "--no-confirm"]
#
# Example: Agent with custom MCP tool guidance (appended when --use-mcp-tools is set)
# [agents.gemini]
# command = "gemini"
# args = ["--yolo", "{prompt}"]
# mcp_prompt = "Use @web search to look up API docs when uncertain."
