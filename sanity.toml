# SanityHarness Configuration
# See: https://github.com/lemon07r/sanityharness

[harness]
session_dir = "./sessions"
default_timeout = 120       # seconds per task
max_attempts = 5            # maximum attempts in watch mode
output_format = "all"       # json, human, or all

[docker]
go_image = "ghcr.io/lemon07r/sanity-go:latest"
rust_image = "ghcr.io/lemon07r/sanity-rust:latest"
typescript_image = "ghcr.io/lemon07r/sanity-ts:latest"
kotlin_image = "ghcr.io/lemon07r/sanity-kotlin:latest"
dart_image = "ghcr.io/lemon07r/sanity-dart:latest"
zig_image = "ghcr.io/lemon07r/sanity-zig:latest"
auto_pull = true            # automatically pull images if missing

# =============================================================================
# Sandbox Configuration
# =============================================================================
# The bubblewrap (bwrap) sandbox restricts agent filesystem access during eval.
# $HOME is mounted read-only, with specific directories made writable so agents
# can persist session data, auth tokens, and caches.
#
# Built-in writable dirs (always mounted if they exist):
#   .cache, .config, .local,
#   .amp, .ccs, .claude, .cline, .codex, .copilot, .crush,
#   .factory, .gemini, .iflow, .kilocode, .kimi, .opencode,
#   .pi, .qwen, .vibe
#
# Add extra $HOME-relative directories here for custom agents:
[sandbox]
# writable_dirs = [".my-agent", ".other-tool"]

# =============================================================================
# Agent Configuration
# =============================================================================
# Built-in agents with sensible defaults:
#   gemini, kilocode, opencode, claude, codex, kimi, crush, copilot,
#   droid, iflow, qwen, amp, codebuff, vibe, goose, junie, ccs, cline, pi
#
# You can override any built-in agent or add custom agents below.
# Each agent config supports:
#   command           - Binary name or path (required)
#   args              - Arguments with {prompt} placeholder (required)
#   model_flag        - Flag for specifying model (optional)
#   model_flag_position - "before" or "after" args (default: "before")
#   env               - Environment variables as key-value pairs (optional)
#
# Example: Override gemini to use a specific model by default
# [agents.gemini]
# command = "gemini"
# args = ["--yolo", "--model", "gemini-2.5-pro", "{prompt}"]
#
# Example: Add a custom agent
# [agents.my-agent]
# command = "/path/to/my-agent"
# args = ["--auto-approve", "--format", "json", "{prompt}"]
# model_flag = "-m"
# model_flag_position = "before"
# env = { MY_API_KEY = "xxx", DEBUG = "true" }
#
# Example: Agent with prompt in the middle of args
# [agents.special-agent]
# command = "special"
# args = ["run", "{prompt}", "--verbose", "--no-confirm"]

# Azure-hosted Claude agent (default)
[agents.azure-claude]
command = "claude"
args = ["--print", "{prompt}"]
model_flag = "--model"
model_flag_position = "before"
env = { ANTHROPIC_API_URL = "https://api.anthropic.com/v1", CLAUDE_USE_VERTEX = "false" }

# Azure-hosted Claude Opus 4.6 model
[agents.azure-claude-opus-4-6]
command = "claude"
args = ["--print", "{prompt}"]
model_flag = "--model"
model_flag_position = "before"
env = { ANTHROPIC_API_URL = "https://api.anthropic.com/v1", CLAUDE_USE_VERTEX = "false" }

# Cliproxy Kimi agent (Kimi K2.5 model)
[agents.cliproxy-kimi]
command = "cliproxy-kimi"
args = ["--quiet", "-p", "{prompt}"]
model_flag = "--model"
model_flag_position = "before"

# Cliproxy Kimi K2.5 variant (explicit kimi-k2.5 model)
[agents.cliproxy-kimi-k2-5]
command = "cliproxy-kimi"
args = ["--quiet", "-p", "{prompt}"]
model_flag = "--model"
model_flag_position = "before"
env = { CLIPROXY_MODEL = "kimi-k2.5" }

# Cliproxy Kimi K2.5 (slash format)
[agents."cliproxy-kimi/kimi-k2.5"]
command = "cliproxy-kimi"
args = ["--quiet", "-p", "{prompt}"]
model_flag = "--model"
model_flag_position = "before"
env = { CLIPROXY_MODEL = "kimi-k2.5" }
